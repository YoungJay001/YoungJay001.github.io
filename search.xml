<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>加密文件测试</title>
      <link href="/2025/07/01/%E5%8A%A0%E5%AF%86%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95/"/>
      <url>/2025/07/01/%E5%8A%A0%E5%AF%86%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="1e2e9209824362972c119735ee81cc512bd03b968cfb505901a9f19168292183">5ca65f6e409a4516abcdbdfd3545ebf1e148b557f445483c921f4cb45c596bd031e4ca14f5e5475e030e485715984599570c36f24a08dca5af5fae8bf8e21a58c133c71d344282f4b1f03f7bc00f450541098fd3574bb6345562094847df7a168ac7f2bb7925efb5b7a5cab31384153900334c2f8a12a45c633f9c858357c24c57d34960008878674f4a8ba7cc2e50f3e1969048d6d706e66098528a81e891c951e304f82214cdca37185da456c238f2</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">您好, 这里需要密码.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>你的第一个基于fiscobcos的前后端项目（开源免费）</title>
      <link href="/2025/07/01/%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8EFISCOBCOS%E7%9A%84%E5%89%8D%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%EF%BC%88%E5%8F%91%E8%A1%8C%E8%BD%AC%E8%B4%A6%EF%BC%89%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89/"/>
      <url>/2025/07/01/%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8EFISCOBCOS%E7%9A%84%E5%89%8D%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%EF%BC%88%E5%8F%91%E8%A1%8C%E8%BD%AC%E8%B4%A6%EF%BC%89%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<blockquote><p>  本文旨在介绍一个简单的基于fiscobcos的前后端网站应用。Springboot+js前后端不分离。</p><p>所使用到的合约也是一个最基本的。首先您需要知道的是完整项目分为三部分，1是区块链平台webase搭建（此项目使用节点前置webase-front即可），2是智能合约编写（此项目使用的合约是webase自带的Asset合约，便于后者学习），3是前后端代码编写以及连接区块链平台（此项目后端为spring boot,前端仅仅使用了css+html+js）。OK，介绍完毕，那我们正式开始吧！</p></blockquote><blockquote><h2 id="获取方式在文末"><a href="#获取方式在文末" class="headerlink" title="获取方式在文末"></a>获取方式在文末</h2></blockquote><p><strong>目录</strong></p><p><a href="#%E4%B8%80.%E6%89%8D%E8%89%BA%E5%B1%95%E7%A4%BA">一.才艺展示</a></p><p><a href="#%E4%B8%80.%E5%8C%BA%E5%9D%97%E9%93%BE%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA">一.区块链平台搭建</a></p><p><a href="#%E4%BA%8C%EF%BC%8C%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%BC%96%E5%86%99">二，智能合约编写</a></p><p><a href="#%E4%B8%89%EF%BC%8C%E5%89%8D%E5%90%8E%E7%AB%AF">三，前后端</a></p><p><a href="#%E5%8A%9F%E8%83%BD%E6%BC%94%E7%A4%BA%EF%BC%9A">功能演示：</a></p><h2 id="一-才艺展示"><a href="#一-才艺展示" class="headerlink" title="一.才艺展示"></a>一.才艺展示</h2><blockquote><p>先展示图片，在文末展示具体功能</p></blockquote><p><img src="/image1/eaa7c573797d44ba9b7256b1587077a5.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p><img src="/image1/e31910f4b4694c62a38666c5339fbcec.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><h2 id="一-区块链平台搭建"><a href="#一-区块链平台搭建" class="headerlink" title="一.区块链平台搭建"></a>一.区块链平台搭建</h2><p>1.搭建单机4节点。<a href="https://blog.csdn.net/2302_77339802/article/details/131702619">戳我查看</a>  （console可以不用搭建，但是java肯定要下载）</p><p>2.搭建webase-front节点前置</p><ul><li>下载安装包（建议在fisco文件下面）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://osp-1257653870.cos.ap-guangzhou.myqcloud.com/WeBASE/releases/download/v1.5.5/webase-front.zip</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><img src="/image1/9ea5f7283e4249d29ce2404e877da863.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><ul><li>解压</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip webase-front.zip</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>![img](&#x2F;image1&#x2F;ad7327b5f39a4e6681aa44d5208cf79d.gif<img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑<img src="/image1/628e9a037f5d4a5eb62954bafd164fba.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd webase-front</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><ul><li>拷贝sdk证书文件</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -r ../nodes/127.0.0.1/sdk/* ./conf/</span><br></pre></td></tr></table></figure><p>![img](&#x2F;image1&#x2F;10a67eeedff24763a5a645e09091ae99.gif<img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑<img src="/image1/555a24ed8ce6489e9ecc57e004bed7e3.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><ul><li>启动节点</li></ul><p>进入~&#x2F;fisco&#x2F;nodes&#x2F;127.0.0.1目录上</p><p><img src="https://i-blog.csdnimg.cn/blog_migrate/5cf7d9073740cecba92ad9c88e126d41.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p><img src="/image1/1ada4078ad0d47218f914991ad221634.gif!%5B%E7%82%B9%E5%87%BB%E5%B9%B6%E6%8B%96%E6%8B%BD%E4%BB%A5%E7%A7%BB%E5%8A%A8%5D(data:image/gif;base64,R0lGODlhAQABAPABAP/wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="img">编辑</p><ul><li>配置java环境变量</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>![img](&#x2F;image1&#x2F;434b3d93f0294bfb9a15e28f73a40b7d.gif<img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑<img src="/image1/7e27a14aa56f4b44ba513bd163f50dee.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p><img src="/image1/916bfa5a4924488f8bfe5736a1317363.gif!%5B%E7%82%B9%E5%87%BB%E5%B9%B6%E6%8B%96%E6%8B%BD%E4%BB%A5%E7%A7%BB%E5%8A%A8%5D(data:image/gif;base64,R0lGODlhAQABAPABAP/wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">编辑</p><p>启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd &amp;&amp;cd fisco</span><br><span class="line">cd webase-front</span><br><span class="line"></span><br><span class="line">bash start.sh</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><img src="https://i-blog.csdnimg.cn/blog_migrate/9be8353e1b4e594f16b8cdf4f212a7c3.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><ul><li>输入ip a 查询到你的虚拟机IP</li></ul><p><img src="/image1/56843522324f49f784f5480ff2f25c36.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><ul><li>在浏览器中输入</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://虚拟机IP:5002/WeBASE-Front</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><img src="/image1/2cfd8c4c9f484a1aa3ae16c69914d557.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p> 至此，区块链平台已经搭建。</p><h2 id="二，智能合约编写"><a href="#二，智能合约编写" class="headerlink" title="二，智能合约编写"></a>二，智能合约编写</h2><blockquote><p>好的，到了我们第二部分了，智能合约可以理解为是我们连接区块链平台的介质，本项目作为最适合新手学习的项目，所以采用的合约是webase-front自带的合约Asset，在我的项目内进行了简单的修改。</p></blockquote><p><img src="/image1/e5b0153a225e4a1fa90fb5588a2cc320.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p><img src="/image1/20250701111854025.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>我修改后的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.0;</span><br><span class="line"></span><br><span class="line">contract Asset &#123;</span><br><span class="line">    address public issuer;</span><br><span class="line">    mapping (address =&gt; uint) public balances;</span><br><span class="line"></span><br><span class="line">    event Sent(address from, address to, uint amount);</span><br><span class="line"></span><br><span class="line">    constructor() &#123;</span><br><span class="line">        issuer = msg.sender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function issue(address receiver, uint amount) public &#123;</span><br><span class="line">      require(msg.sender == issuer, &quot;Only issuer can issue tokens&quot;);</span><br><span class="line">        balances[receiver] += amount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function send(address receiver, uint amount) public &#123;</span><br><span class="line">      require(balances[msg.sender] &gt;= amount, &quot;Insufficient balance&quot;);</span><br><span class="line">        balances[msg.sender] -= amount;</span><br><span class="line">        balances[receiver] += amount;</span><br><span class="line">        emit Sent(msg.sender, receiver, amount);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    function getBalance(address account) public  view returns (uint) &#123;</span><br><span class="line">        return balances[account];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>然后我们编译部署该合约</p><p><img src="/image1/bb878005298d4609a98fad1f50a22be8.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p> 部署成功后会得到合约地址以及abi的信息，这两个信息可以在后端里进行调用。</p><p>合约一共有三个功能（发行，转账，查看余额）</p><h2 id="三，前后端"><a href="#三，前后端" class="headerlink" title="三，前后端"></a>三，前后端</h2><blockquote><p>首先展示一下项目目录，可以看到核心代码文件。后端调用智能合约，然后前端进行可视化操作。</p></blockquote><p><img src="/image1/977423be19644103912dfc042c4f704e.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>后端主要配置文件的地方</p><p><img src="/image1/c61a8293a44d4873b6c89961b1e20351.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><h3 id="功能演示："><a href="#功能演示：" class="headerlink" title="功能演示："></a>功能演示：</h3><p>代币发行：</p><p>登录管理员账户，发行代币。</p><p><img src="/image1/3f14cbb4a5a74575982fda138b10eb61.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>如果不是管理员账户则发行失败：</p><p><img src="/image1/f0822ba2eafe4bc0a8e431212818548b.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><blockquote><p>这里的权限控制是合约进行的。只需要一行代码，神奇吧。</p></blockquote><p><img src="/image1/d0168b455e8e4f14a8197c74cb5469ba.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>查询余额：</p><p><img src="/image1/8dd1063e9cd148db9457c2036ee77d09.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>用户之间转账：</p><p><img src="/image1/52d13a987a7d4b1f82162b059ae3f8da.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><blockquote><p>此时验证数据上链的时候到了。我们打开节点控制台。</p></blockquote><p><img src="/image1/a2c577d5e03b47b9b45ffafeaa75b477.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p><img src="/image1/bffbe64da3264220acc7fe144713da88.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p><img src="/image1/cd4e38df778e4c6fb30bf54a3f19110e.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>此时可以看到数据确实在链上显示~</p><p>OK，至此功能演示完毕！</p><blockquote><p>想要源码可以私信~   觉得有意思可以举起你发财的小手帮我点个赞~~</p></blockquote><h3 id="下载的话记得点一个star哦"><a href="#下载的话记得点一个star哦" class="headerlink" title="下载的话记得点一个star哦~"></a>下载的话记得点一个star哦~</h3>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>使用web3工具结合fiscobcos网络部署调用智能合约</title>
      <link href="/2025/07/01/%E4%BD%BF%E7%94%A8web3%E5%B7%A5%E5%85%B7%E7%BB%93%E5%90%88fiscobcos%E7%BD%91%E7%BB%9C%E9%83%A8%E7%BD%B2%E8%B0%83%E7%94%A8%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/"/>
      <url>/2025/07/01/%E4%BD%BF%E7%94%A8web3%E5%B7%A5%E5%85%B7%E7%BB%93%E5%90%88fiscobcos%E7%BD%91%E7%BB%9C%E9%83%A8%E7%BD%B2%E8%B0%83%E7%94%A8%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="借助-web3-工具，在-FISCO-BCOS-网络上高效部署与调用智能合约，解锁区块链开发新体验。"><a href="#借助-web3-工具，在-FISCO-BCOS-网络上高效部署与调用智能合约，解锁区块链开发新体验。" class="headerlink" title="借助 web3 工具，在 FISCO BCOS 网络上高效部署与调用智能合约，解锁区块链开发新体验。"></a>借助 web3 工具，在 FISCO BCOS 网络上高效部署与调用智能合约，解锁区块链开发新体验。</h3><p>搭建的区块链网络需要是最新的fiscobcos3.0，最新的才支持web3调用</p><p>现在分享踩坑经验，希望大家点赞</p></blockquote><p><strong>目录</strong></p><p><a href="#1.%E6%90%AD%E5%BB%BAfiscobcos%E8%8A%82%E7%82%B9%EF%BC%883.0Air%E7%89%88%E6%9C%AC%EF%BC%89">1.搭建fiscobcos节点（3.0Air版本）</a></p><p><a href="#2.%E4%BF%AE%E6%94%B9%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E4%BD%BF%E5%A4%96%E9%83%A8%E8%83%BD%E5%A4%9F%E8%BF%9E%E6%8E%A5web3%E7%BD%91%E7%BB%9C">2.修改网络配置使外部能够连接web3网络</a></p><p><a href="#3.%E6%90%AD%E5%BB%BA%E6%8E%A7%E5%88%B6%E5%8F%B0console">3.搭建控制台console</a></p><p><a href="#ubuntu%E4%B8%8B%E8%BD%BD%E9%85%8D%E7%BD%AEjava">ubuntu下载配置java</a></p><p><a href="#%E4%B8%8B%E8%BD%BD%E9%85%8D%E7%BD%AEconsole">下载配置console</a></p><p><a href="#%E5%90%AF%E5%8A%A8%E5%B9%B6%E4%BD%BF%E7%94%A8%E6%8E%A7%E5%88%B6%E5%8F%B0">4.启动并使用控制台</a></p><p><a href="#5.%E9%93%BE%E6%8E%A5metamask%E5%B9%B6%E5%9C%A8remix%E9%87%8C%E7%BC%96%E8%AF%91%E9%83%A8%E7%BD%B2%E4%B8%80%E4%B8%AA%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6">5.链接metamask并在remix里编译部署一个智能合约</a></p><p><a href="#6.%E7%BC%96%E8%AF%91%E9%83%A8%E7%BD%B2%E5%90%88%E7%BA%A6%EF%BC%9A">6.编译部署合约：</a></p><hr><h4 id="1-搭建fiscobcos节点（3-0Air版本）"><a href="#1-搭建fiscobcos节点（3-0Air版本）" class="headerlink" title="1.搭建fiscobcos节点（3.0Air版本）"></a>1.搭建fiscobcos节点（3.0Air版本）</h4><p><strong>安装ubuntu依赖</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y curl openssl wget</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>创建操作目录，下载建链脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 创建操作目录</span><br><span class="line">cd ~ &amp;&amp; mkdir -p fisco &amp;&amp; cd fisco</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">curl -#LO https://gitee.com/FISCO-BCOS/FISCO-BCOS/releases/download/v3.11.0/build_chain.sh &amp;&amp; chmod u+x build_chain.sh</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>首先需要在github下载fisco-bcos二进制文件，然后传到fisco文件夹下面，然后尝试执行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash build_chain.sh -l127.0.0.1:4 -p30300,20200 -e ./fisco-bcos</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p> 这个时候你会发现因为github原因还是拉取不下来</p><p>解决：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">打开host文件: sudo gedit /etc/hosts,然后输入</span><br><span class="line"></span><br><span class="line">#github</span><br><span class="line">140.82.114.4 github.com</span><br><span class="line">151.101.1.6 github.global.ssl.fastly.net</span><br><span class="line">151.101.65.6 github.global.ssl.fastly.net</span><br><span class="line">151.101.129.6 github.global.ssl.fastly.net</span><br><span class="line">151.101.193.6 github.global.ssl.fastly.net</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><img src="/image1/20250701093200183.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>#保存退出并重启服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart NetworkManager</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p> 重新执行搭建区块链网络</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash build_chain.sh -l127.0.0.1:4 -p30300,20200 -e ./fisco-bcos</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><img src="/image1/20250701093117361.png" alt="image-20250522113147503"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><h4 id="2-修改网络配置使外部能够连接web3网络"><a href="#2-修改网络配置使外部能够连接web3网络" class="headerlink" title="2.修改网络配置使外部能够连接web3网络"></a>2.修改网络配置使外部能够连接web3网络</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[web3_rpc]</span><br><span class="line">    enable=false  //将false改为true</span><br><span class="line">    listen_ip=0.0.0.0</span><br><span class="line">    listen_port=8545</span><br><span class="line">    thread_count=8</span><br><span class="line">    </span><br></pre></td></tr></table></figure><p>在节点0的相关配置下面</p><p><img src="/image1/20250701093208708.png" alt="image-20250522113518693"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p><img src="/image1/20250701093212511.png" alt="image-20250522113631865"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p> 启动节点</p><p><img src="/image1/42cd623771545cf1e6eeb0c939d1fc96.png" alt="image-20250522113341029"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>检查是否启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep -v grep | grep fisco-bcos</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h4 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a><img src="/image1/20250701093217753.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</h4><h4 id="3-搭建控制台console"><a href="#3-搭建控制台console" class="headerlink" title="3.搭建控制台console"></a>3.搭建控制台console</h4><p>fiscobcos可以通过控制台设置账户金额</p><h4 id="ubuntu下载配置java"><a href="#ubuntu下载配置java" class="headerlink" title="ubuntu下载配置java"></a>ubuntu下载配置java</h4><p>首先需要下载java14（这个是官方推荐，我试了也没问题）</p><p>下载地址：<a href="https://www.oracle.com/sg/java/technologies/javase/jdk14-archive-downloads.html">Java Archive Downloads - Java SE 14 | Oracle Singapore</a></p><p>下载的时候需要登录，这里附上一个 oracle 账号密码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">账号：`83926039@qq.com`</span><br><span class="line">密码：`Oracle0.`</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><img src="/image1/20250701093225022.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>创建安装目录：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /usr/lib/jvm/</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>把下载的文件拖进fisco目录下然后解压缩：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -xvzf jdk-14.0.2_linux-x64_bin.tar.gz -C /usr/lib/jvm/</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><img src="/image1/20250701093229918.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>将 JAVA_HOME 添加到环境变量中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/profile</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>添加以下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/lib/jvm/jdk-14.0.2</span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><img src="/image1/20250701093233337.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>保存并退出后，运行以下命令使更改生效：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>查看java是否成功</p><p><img src="/image1/1cd995b1f786447d964e8effc827a3ff.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><h4 id="下载配置console"><a href="#下载配置console" class="headerlink" title="下载配置console"></a>下载配置console</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">curl -#LO https://gitee.com/FISCO-BCOS/console/raw/master/tools/download_console.sh &amp;&amp; bash download_console.sh</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><strong>拷贝控制台配置文件</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -n console/conf/config-example.toml console/conf/config.toml</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><strong>配置控制台证书</strong></p><p>控制台与节点之间默认开启 SSL 连接，控制台需要配置证书才可连接节点。开发建链脚本在生成节点的同时，生成了 SDK 证书，可直接拷贝生成的证书供控制台使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -r nodes/127.0.0.1/sdk/* console/conf</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="4-启动并使用控制台"><a href="#4-启动并使用控制台" class="headerlink" title="4.启动并使用控制台"></a>4.启动并使用控制台</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~/fisco/console &amp;&amp; bash start.sh</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><img src="/image1/20250701093236852.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>启动完控制台后，可以选择把余额功能打开：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 开启总体功能</span><br><span class="line">setSystemConfigByKey feature_balance 1</span><br><span class="line"># 开启Balance预编译功能</span><br><span class="line">setSystemConfigByKey feature_balance_precompiled 1</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p> <img src="/image1/20250701093240349.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>查看admin账户，记住当前账号的私钥。等会导入小狐狸钱包的时候有用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash get_account.sh -k ../nodes/ca/accounts/0x43d3b352c673d8729a238e3606c118ef232b63d9.pem</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><img src="/image1/20250701093244079.png" alt="image-20250522124103476"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>为了能在控制台使用治理委员的功能，所以我们需要把账户私钥对放在<code> ~/fisco/console/account/ecdsa/</code> 目录下。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp -r ../nodes/ca/accounts/0x43d3b352c673d8729a238e3606c118ef232b63d9.pem account/ecdsa/</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>修改私钥文件的权限：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod 777 0x43d3b352c673d8729a238e3606c118ef232b63d9.pem</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>重新进入控制台，输入命令，查看文件中可用的地址：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listAccount</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>切换账号成 admin ：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[group0]: /apps&gt; loadAccount 0x43d3b352c673d8729a238e3606c118ef232b63d9</span><br><span class="line">Load account 0x43d3b352c673d8729a238e3606c118ef232b63d9 success!</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>试试管理员才能使用的增加余额：</p><p><img src="/image1/20250701093251181.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查看余额</span><br></pre></td></tr></table></figure><p><img src="/image1/20250701093253725.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><h4 id="5-链接metamask并在remix里编译部署一个智能合约"><a href="#5-链接metamask并在remix里编译部署一个智能合约" class="headerlink" title="5.链接metamask并在remix里编译部署一个智能合约"></a>5.链接metamask并在remix里编译部署一个智能合约</h4><blockquote><p>metamask如何使用，网上有很多详细的介绍，在这里不在具体讲解</p></blockquote><p>配置网络（ip要替换为你的虚拟机ip）</p><p><img src="/image1/20250701093255657.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p><img src="/image1/20250701093259050.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>我这里添加了两个账户，均可以正常显示</p><h4 id="6-编译部署合约："><a href="#6-编译部署合约：" class="headerlink" title="6.编译部署合约："></a>6.编译部署合约：</h4><p><img src="/image1/20250701093303082.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>每次执行合约操作时会调出小狐狸钱包进行交换，点击确认。</p><p><img src="/image1/20250701093327185.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>部署成功！调用其他功能也是可以的。</p><p>7.调用合约可能出现的报错</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">If the transaction failed for not having enough gas, try increasing the gas limit gently.</span><br></pre></td></tr></table></figure></blockquote><p>解决：选中Custom,增大Gas限制</p><p><img src="/image1/20250701093305505.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p><p>附上我测试使用的合约</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.6.10;</span><br><span class="line">pragma experimental ABIEncoderV2;</span><br><span class="line">contract CarRentalContract &#123;</span><br><span class="line">    // 定义租赁记录结构体</span><br><span class="line">    struct RentalRecord &#123;</span><br><span class="line">        string userId;</span><br><span class="line">        string carId;</span><br><span class="line">        string createTime;</span><br><span class="line">        string type1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    mapping(string =&gt; RentalRecord) public carIdToRentalRecord;</span><br><span class="line"></span><br><span class="line">    event RentalRecordAdded(</span><br><span class="line">        string indexed carId,</span><br><span class="line">        string userId,</span><br><span class="line">        string createTime,</span><br><span class="line">        string type1</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    // 添加租赁记录的函数</span><br><span class="line">    function addRentalRecord(</span><br><span class="line">        string memory _userId,</span><br><span class="line">        string memory _carId,</span><br><span class="line">        string memory _createTime,</span><br><span class="line">        string memory _type</span><br><span class="line">    ) public &#123;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">       </span><br><span class="line">        RentalRecord memory newRecord = RentalRecord(&#123;</span><br><span class="line">            userId: _userId,</span><br><span class="line">            carId: _carId,</span><br><span class="line">            createTime: _createTime,</span><br><span class="line">            type1: _type</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        carIdToRentalRecord[_carId] = newRecord;</span><br><span class="line"></span><br><span class="line">        emit RentalRecordAdded(_carId, _userId, _createTime, _type);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 查询租赁记录的函数</span><br><span class="line">    function getRentalRecord(</span><br><span class="line">        string memory _carId</span><br><span class="line">    )</span><br><span class="line">        public</span><br><span class="line">        view</span><br><span class="line">        returns (</span><br><span class="line">            string memory userId,</span><br><span class="line">            string memory carId,</span><br><span class="line">            string memory createTime,</span><br><span class="line">            string memory type1</span><br><span class="line">        )</span><br><span class="line">    &#123;</span><br><span class="line">      </span><br><span class="line">        require(</span><br><span class="line">            bytes(carIdToRentalRecord[_carId].carId).length != 0,</span><br><span class="line">            &quot;Car ID does not exist&quot;</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        RentalRecord storage record = carIdToRentalRecord[_carId];</span><br><span class="line">        return (record.userId, record.carId, record.createTime, record.type1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><blockquote><p>如果大家还是下载不下来，私聊我给你安装包文件！</p><p>都看到这里了，还不快点赞！</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
